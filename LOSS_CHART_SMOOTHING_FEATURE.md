# 📈 Loss曲线平滑显示功能

## 🎯 概述

Loss曲线组件现在包含了TensorBoard风格的平滑功能，通过减少数据噪声来帮助更清晰地可视化训练loss趋势。

## ✨ 功能特性

### 🎚️ 平滑控制
- **实时平滑滑块**: 调整平滑因子从0（最大平滑）到1（无平滑）
- **实时预览**: 滑动滑块时变化立即生效
- **因子显示**: 显示当前平滑因子值（0.00 - 1.00）

### 🔘 快速预设
- **None** (1.0): 原始数据，无平滑
- **Light** (0.9): 轻微平滑，保留大部分细节
- **Medium** (0.6): 平衡平滑，适合一般使用
- **Heavy** (0.3): 强烈平滑，显示清晰趋势
- **Max** (0.01): 最大平滑，非常平滑的曲线

### 👁️ 原始数据叠加
- **显示原始数据选项**: 同时显示平滑和原始数据
- **视觉区分**: 原始数据以半透明虚线显示
- **自动隐藏**: 选项仅在启用平滑时出现

## 🧮 算法

平滑处理使用**指数移动平均（EMA）**：

```javascript
smoothed_value = smoothing_factor * current_value + (1 - smoothing_factor) * previous_smoothed_value
```

### 参数说明:
- **smoothing_factor**: 0-1范围
  - **0**: 最大平滑（接近平直线）
  - **1**: 无平滑（原始数据）
  - **0.6**: 默认值，良好的平衡

## 🎨 视觉特性

### 平滑数据:
- **实线**，完全不透明
- **标签后缀**: 启用平滑时显示"(smoothed)"
- **颜色保持**: 使用原始指标颜色

### 原始数据（启用时）:
- **虚线**（`[5, 5]`样式）
- **40%透明度**，呈现微妙效果
- **标签后缀**: "(raw)"
- **无数据点**以减少视觉干扰

## 🎮 使用方法

1. **访问平滑控制**：在指标选择下方的metrics面板中
2. **使用滑块**进行精细控制
3. **点击预设按钮**选择常用平滑级别
4. **切换"显示原始数据"**以比较平滑与原始数据
5. **变化立即生效**应用于所有选中的指标

## 🔧 技术实现

### 状态变量:
- `smoothingFactor`: 当前平滑级别（0-1）
- `showRawData`: 是否显示原始数据叠加

### 数据处理:
- 在`useMemo`的`chartData`计算过程中应用
- 为平滑和原始数据创建独立的数据集
- Chart.js处理多数据集的渲染

### 性能:
- 平滑算法复杂度为O(n)
- 仅在数据或设置变化时高效重新计算
- 不影响数据获取或存储

## 📊 使用场景

### 训练监控:
- **早期训练**: 使用轻微平滑以发现训练问题
- **长时间训练**: 使用中/重度平滑查看整体趋势
- **调试**: 显示原始数据以调查特定的峰值或下降

### 分析:
- **趋势识别**: 重度平滑揭示学习模式
- **收敛评估**: 平滑曲线帮助评估训练稳定性
- **对比**: 原始数据叠加帮助验证平滑准确性

## 🎯 优势

1. **噪声减少**: 更容易看到实际的训练趋势
2. **灵活可视化**: 根据需要选择合适的平滑程度
3. **数据完整性**: 原始数据始终可用于验证
4. **熟悉界面**: TensorBoard风格的控制，易于上手
5. **实时更新**: 变化立即生效，无需刷新页面

此功能通过提供更清晰、更易解释的loss可视化来增强训练监控体验，同时保持对原始数据的访问。